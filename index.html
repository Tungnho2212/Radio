<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://thuthuatnhanh.com/wp-content/uploads/2020/10/anh-logo-attack-on-titan-cua-doi-trinh-sat-don-gian-nhung-manh-me.jpg">
    <title>Radio AND Chill ü§ì</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background: url('https://images7.alphacoders.com/788/thumb-1920-788647.jpg') no-repeat center center fixed;
            background-size: cover; /* Ho·∫∑c th·ª≠ cover n·∫øu mu·ªën ph·ªß h·∫øt */
            background-position: center;
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .neon-weather {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 10px;
            color: #ff5e62; /* M√†u neon ƒë·ªè */
            text-shadow: 0 0 5px #ff5e62;
            box-shadow: 0 0 10px #ff5e62, 0 0 20px #ff5e62;
            font-family: 'Courier New', monospace;
            max-width: 250px;
            border: 1px solid #ff5e62;
        }
                @keyframes neonBlink {
            0%, 100% { box-shadow: 0 0 10px #ff5e62, 0 0 20px #ff5e62; }
            50% { box-shadow: 0 0 15px #ff5e62, 0 0 30px #ff5e62, 0 0 45px #ff5e62; }
        }

        .neon-weather {
            animation: neonBlink 3s infinite;
        }
        .neon-weather p {
            margin: 5px 0;
            font-size: 14px;
        }

        .neon-weather p:first-child {
            font-weight: bold;
            font-size: 16px;
        }
        @keyframes moveRandom {
            0% {
                transform: translate(0, 0);
            }
            25% {
                transform: translate(50px, -80px);
            }
            50% {
                transform: translate(-60px, 90px);
            }
            75% {
                transform: translate(80px, -50px);
            }
            100% {
                transform: translate(0, 0);
            }
        }
        h2 {
            color: white;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 10px;
        }
                #clock {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 20px;
            font-weight: bold;
            color: #00ffff; /* M√†u xanh d∆∞∆°ng neon */
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
        }
        /* Th√™m v√†o ph·∫ßn style */
        button, .music-menu-button {
            background: transparent;
            color: #40c756;
            border: 2px solid currentColor;
            box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
            text-shadow: 0 0 5px currentColor;
            position: relative;
            overflow: hidden;
            transition: 0.3s;
            z-index: 1;
        }
        .neon-select {
        padding: 8px 12px;
        border: 1px solid #00ffff;
        border-radius: 5px;
        background: rgba(0,0,0,0.7);
        color: white;
        cursor: pointer;
        box-shadow: 0 0 10px #00ffff;
        }

        .neon-select option {
        background: #222;
        }

        .neon-select:focus {
        outline: none;
        box-shadow: 0 0 15px #00ffff;
        }
        button::before, .music-menu-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: currentColor;
            opacity: 0.1;
            z-index: -1;
            transition: 0.3s;
        }

        button:hover, .music-menu-button:hover {
            box-shadow: 0 0 15px currentColor, 0 0 30px currentColor;
            transform: translateY(-2px);
        }

        button:hover::before, .music-menu-button:hover::before {
            opacity: 0.2;
        }

        .active {
            box-shadow: 0 0 15px currentColor, 0 0 30px currentColor, 0 0 45px currentColor !important;
            font-weight: bold;
        }
        #audioPlayer {
            width: 80%;
            max-width: 400px;
            margin-bottom: 20px;
        }
        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            max-width: 800px;
        }
/* X√≥a ho·∫∑c s·ª≠a ph·∫ßn button m·∫∑c ƒë·ªãnh */
        #buttons button {
        padding: 12px 20px;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        margin: 5px;
        border: none;
        font-weight: bold;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        z-index: 1;

        /* Th√™m n·ªÅn tr·∫Øng v·ªõi ƒë·ªô trong su·ªët */
        background-color: rgba(255, 255, 255, 0.7); /* 70% opacity */

        /* ƒê·∫£m b·∫£o ch·ªØ ƒë·∫≠m v√† d·ªÖ ƒë·ªçc */
        color: #000; /* Ch·ªØ m√†u ƒëen */
        text-shadow: none; /* B·ªè text-shadow n·∫øu c√≥ */
        }
        /* ƒê·∫£m b·∫£o class neon ƒë∆∞·ª£c ∆∞u ti√™n */
        button.neon-red, button.neon-blue, button.neon-green,
        button.neon-purple, button.neon-pink, button.neon-yellow,
        button.neon-orange {
            color: var(--neon-color) !important;
            text-shadow: 0 0 5px currentColor !important;
            box-shadow: 0 0 10px currentColor, 0 0 20px currentColor !important;
        }

        /* ƒê·ªãnh nghƒ©a m√†u neon */
        .neon-red { --neon-color: #ff5e62; }
        .neon-blue { --neon-color: #00ffff; }
        .neon-green { --neon-color: #00ff7f; }
        .neon-purple { --neon-color: #9370db; }
        .neon-pink { --neon-color: #ff1493; }
        .neon-yellow { --neon-color: #ffff00; }
        .neon-orange { --neon-color: #ff8c00; }
        button:hover {
            background: rgba(255, 255, 255, 1);
        }
        .active {
            background: #ffcc00 !important;
            color: black;
            font-weight: bold;
        }
        .music-menu-container {
            position: absolute;
            top: 50px;
            right: 10px;
        }
        .music-menu-button {
            background: linear-gradient(45deg, #ff7e5f, #feb47b);
            color: rgb(241, 6, 6);
            padding: 12px 25px;
            border-radius: 15px;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            display: block;
            transition: 0.3s;
            margin-right: 20px;
        }
        .music-menu-button:hover {
            margin-right: 20px;
            background: linear-gradient(45deg, #ff5e62, #ff9966);
        }
        .music-menu {
            display: none;
            width: 275px;
            max-height: 250px;
            overflow-y: auto;
            background: rgba(0, 74, 83, 0.85);
            color: rgb(255, 255, 255);
            padding: 10px;
            border-radius: 10px;
            margin-top: 5px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
        }
        .music-menu li {
            list-style: none;
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            transition: 0.3s;
            margin-right: 20px;
        }
        .music-menu li:hover {
            background: linear-gradient(45deg, #2193b0, #6dd5ed);
            color: black;
            font-weight: bold;
            margin-right: 20px;
        }
        #searchBox {
            width: 100%;
            padding: 5px;
            margin-bottom: 5px;
            border-radius: 5px;
            border: none;
        }
        .firefly {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: rgba(0, 255, 0, 0.8);
            box-shadow: 0 0 10px 4px rgba(0, 255, 0, 0.8);
            border-radius: 50%;
            pointer-events: none;
            animation: moveRandom 10s infinite linear;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px currentColor, 0 0 30px currentColor !important;
        }
        .chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #00ffff;
            color: black;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 0 15px #00ffff, 0 0 30px #00ffff;
            font-size: 24px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .chat-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff;
        }

        /* ============== CHAT CONTAINER ============== */
        .chat-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.7);
            border: 2px solid #00ffff;
            z-index: 1000;
            display: none;
            flex-direction: column;
            max-height: 500px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        #onlineCountContainer {
            background-color: #f8f9fa;
            padding: 8px 15px;
            border-bottom: 1px solid #eee;
            text-align: right;
            font-size: 0.9em;
            color: #555;
        }
        /* ============== CHAT HEADER ============== */
        .chat-header {
            background: linear-gradient(135deg, rgba(0, 100, 100, 0.9), rgba(0, 150, 150, 0.8));
            color: #00ffff;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 2px solid #00ffff;
            text-shadow: 0 0 10px #00ffff;
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #closeChat {
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }

        #closeChat:hover {
            transform: scale(1.2);
            color: #ff5e62;
        }
/* ============== CHAT TOGGLE BUTTON ============== */
.chat-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #00ffff;
    color: black;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 0 15px #00ffff, 0 0 30px #00ffff;
    font-size: 24px;
    font-weight: bold;
    z-index: 1000;
    transition: all 0.3s ease;
    border: 2px solid rgba(255, 255, 255, 0.8);
}

.chat-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff;
}

/* ============== CHAT CONTAINER ============== */
.chat-container {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 350px;
    background: rgba(0, 0, 0, 0.85);
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.7);
    border: 2px solid #00ffff;
    z-index: 1000;
    display: none;
    flex-direction: column;
    max-height: 500px;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

/* ============== CHAT HEADER ============== */
.chat-header {
    background: linear-gradient(135deg, rgba(0, 100, 100, 0.9), rgba(0, 150, 150, 0.8));
    color: #00ffff;
    padding: 15px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    border-bottom: 2px solid #00ffff;
    text-shadow: 0 0 10px #00ffff;
    cursor: move;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#closeChat {
    font-size: 24px;
    cursor: pointer;
    transition: all 0.3s;
}

#closeChat:hover {
    transform: scale(1.2);
    color: #ff5e62;
}

/* ============== CHAT MESSAGES ============== */
.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    max-height: 350px;
    scrollbar-width: thin;
    scrollbar-color: #00ffff rgba(0, 50, 50, 0.3);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}
.chat-messages .sent {
    align-self: flex-end;
}
.message-container {
    width: 70%;
    display: flex;
    border-radius: 5px;
    margin-bottom: 15px;
    align-items: first baseline;
}

.message {
    padding: 12px 15px;
    border-radius: 10px;
    background: rgb(170 179 46 / 26%);
    color: white;
    word-wrap: break-word;
    animation: fadeIn 0.3s ease;
    border-radius: 3px solid #174605;
    max-width: 70%;
    display: inline-block; /* Add this line */
    vertical-align: top; /* Recommended for inline-block elements */
}

.sent {
    background-color: #276110;
    color: white;
    align-self: flex-end; /* Align your messages to the right */
    display: inline-block; /* Add this line to make background fit content */
    vertical-align: top; /* Recommended for inline-block elements */
}

.received {
    align-self: flex-start;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.message .sender {
    font-weight: bold;
    margin-bottom: 5px;
    display: block;
    padding-right: 10px;
}

.message .time {
    font-size: 12px;
    color: #aaa;
    display: block;
    margin-top: 5px;
}

.sent .time {
    text-align: right;
}

/* ============== CHAT INPUT ============== */
.chat-input {
    display: flex; /* Make sure this is present for proper alignment */
    padding: 15px;
    border-top: 2px solid #00ffff;
    background: rgba(0, 50, 50, 0.5);
}

#messageInput {
    flex-grow: 1; /* Allow the input to take up available space */
    padding: 12px 15px;
    border: 2px solid #00ffff;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 14px;
    outline: none;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    transition: all 0.3s;
    margin-right: 10px; /* Add margin to the right of the input */
}

#messageInput:focus {
    box-shadow: 0 0 15px #00ffff;
    border-color: #00ffcc;
}

#sendMessage {
    padding: 12px 20px;
    background: #00ffff;
    color: black;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 0 10px #00ffff;
    transition: all 0.3s;
    text-transform: uppercase;
    /* margin-left: 10px; Remove inline style */
}

#sendMessage:hover {
    background: #00e6e6;
    box-shadow: 0 0 15px #00ffff;
    transform: translateY(-2px);
}

/* ============== CUSTOM SCROLLBAR ============== */
.chat-messages::-webkit-scrollbar {
    width: 8px;
}

.chat-messages::-webkit-scrollbar-track {
    background: rgba(0, 50, 50, 0.3);
    border-radius: 10px;
}

.chat-messages::-webkit-scrollbar-thumb {
    background: #00ffff;
    border-radius: 10px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
    background: #00e6e6;
}

/* ============== USER COUNT BADGE ============== */
#onlineCountContainer {
    background-color: #f8f9fa;
    padding: 8px 15px;
    border-bottom: 1px solid #eee;
    text-align: right;
    font-size: 0.9em;
    color: #555;
  }
    </style>
</head>
<body>
    <div id="clock"></div>
    <h2>RADIO AND CHILL</h2>
    <audio id="audioPlayer" controls></audio>
    <div id="weather" class="neon-weather">
        <select id="citySelect" class="neon-select">
            <option value="Hanoi" selected>H√† N·ªôi</option>
            <option value="Ho Chi Minh City">TP.HCM</option>
            <option value="Danang">ƒê√† N·∫µng</option>
            <option value="Hue">Hu·∫ø</option>
            <option value="Nha Trang">Nha Trang</option>
            <option value="HaiPhong">H·∫£i Ph√≤ng</option>
            <option value="Can Tho">C·∫ßn Th∆°</option>
            <option value="Da Lat">ƒê√† L·∫°t</option>
        </select>
        <div id="weatherInfo"></div>
    </div>
    <div class="button-container" id="buttons"></div>
    <div class="music-menu-container">
        <div class="music-menu-button" onclick="toggleMusicMenu()">MUSIC </div>
        <div class="music-menu" id="musicMenu">
            <input type="text" id="searchBox" placeholder="T√¨m b√†i h√°t..." onkeyup="filterMusic()">
            <ul id="musicList"></ul>
        </div>
    </div>
    <div class="chat-toggle" id="chatToggle">üí¨</div>
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <span>Chat Tr·ª±c Tuy·∫øn</span>
            <span id="closeChat">√ó</span>
            <div id="onlineCountContainer">
                <span id="onlineCount">Online: 0</span>
              </div>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input">
            <input type="text" id="messageInput" placeholder="Nh·∫≠p tin nh·∫Øn..." maxlength="200">
            <button id="sendMessage">G·ª≠i</button>
        </div>
    </div>
    <script>
// ==================== C·∫§U H√åNH FIREBASE ====================
const firebaseConfig = {
  apiKey: "AIzaSyCaxvZR5IHDAr_kZ6-UvzyhCg_8DAXbg5U",
  authDomain: "chatrt-30cdd.firebaseapp.com",
  databaseURL: "https://chatrt-30cdd-default-rtdb.firebaseio.com",
  projectId: "chatrt-30cdd",
  storageBucket: "chatrt-30cdd.firebasestorage.app",
  messagingSenderId: "962241796739",
  appId: "1:962241796739:web:dae759648ffda234af19b6",
  measurementId: "G-H7MDPK58PK"
};

// Kh·ªüi t·∫°o Firebase
 firebase.initializeApp(firebaseConfig);
const database = firebase.database();

 // ==================== PH·∫¶N CHAT ====================
let currentUser = {
        id: '',
        name: '',
        color: ''
    };

    const luffyNames = ["Luffy", "Zoro", "Nami", "Usopp", "Sanji", "Chopper", "Robin", "Franky", "Brook", "Jinbe"];

    function initializeChat() {
        // T·∫°o user ng·∫´u nhi√™n v·ªõi t√™n Luffy
        currentUser.id = 'user_' + Math.random().toString(36).substr(2, 9);
        const randomLuffyName = luffyNames[Math.floor(Math.random() * luffyNames.length)];
        const randomNumber = Math.floor(Math.random() * 100); // Th√™m s·ªë ng·∫´u nhi√™n ƒë·ªÉ tr√°nh tr√πng t√™n
        currentUser.name = `${randomLuffyName}‚òÖ${randomNumber}`;
        currentUser.color = getRandomColor();

        // Tham chi·∫øu database
        const messagesRef = database.ref('messages');
        const usersRef = database.ref('users/' + currentUser.id);
        //
            // Th√™m ph·∫ßn ƒë·∫øm s·ªë ng∆∞·ªùi online
    const onlineUsersRef = database.ref('users');

    onlineUsersRef.on('value', (snapshot) => {
        const users = snapshot.val();
        let onlineCount = 0;

        if (users) {
            const currentTime = Date.now();
            // Xem user l√† online n·∫øu ho·∫°t ƒë·ªông trong v√≤ng 5 ph√∫t tr·ªü l·∫°i
            Object.values(users).forEach(user => {
                if (currentTime - user.lastActive < 300000) { // 5 ph√∫t
                    onlineCount++;
                }
            });
        }

        document.getElementById('onlineCount').textContent = `Online: ${onlineCount}`;
    });
        // L·∫Øng nghe tin nh·∫Øn m·ªõi
        messagesRef.limitToLast(20).on('child_added', (snapshot) => {
            const message = snapshot.val();
            displayMessage(message);
        });

        // ƒê√°nh d·∫•u user online
        usersRef.set({
            name: currentUser.name,
            color: currentUser.color,
            lastActive: firebase.database.ServerValue.TIMESTAMP
        });

        // C·∫≠p nh·∫≠t tr·∫°ng th√°i ho·∫°t ƒë·ªông
        setInterval(() => {
            usersRef.update({
                lastActive: firebase.database.ServerValue.TIMESTAMP
            });
        }, 30000);

        // X√≥a user khi ƒë√≥ng tab
        window.addEventListener('beforeunload', () => {
            usersRef.remove();
        });

        // S·ª± ki·ªán g·ª≠i tin nh·∫Øn
        document.getElementById('sendMessage').addEventListener('click', sendMessage);
        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Toggle chat
        document.getElementById('chatToggle').addEventListener('click', toggleChat);
        document.getElementById('closeChat').addEventListener('click', toggleChat);
    }

    function sendMessage() {
        const input = document.getElementById('messageInput');
        const message = input.value.trim();

        if (message) {
            database.ref('messages').push({
                userId: currentUser.id,
                userName: currentUser.name,
                userColor: currentUser.color,
                text: message,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            });
            input.value = '';
        }
    }

    function displayMessage(message) {
        const messagesDiv = document.getElementById('chatMessages');
        const messageContainer = document.createElement('div');
        messageContainer.className = 'message-container';

        const messageDiv = document.createElement('div');
        messageDiv.className = 'message';

        const time = new Date(message.timestamp).toLocaleTimeString('vi-VN', {
            hour: '2-digit',
            minute: '2-digit'
        });

        messageDiv.innerHTML = `
            <span class="sender" style="color: ${message.userColor}">${message.userName}</span>
            <div>${message.text}</div>
            <span class="time">${time}</span>
        `;

        if (message.userId === currentUser.id) {
            messageDiv.classList.add('sent');
            messageContainer.classList.add('sent');
            messageContainer.appendChild(messageDiv);
        } else {
            messageDiv.classList.add('received');
            messageContainer.classList.add('received');
            messageContainer.appendChild(messageDiv);
        }

        messagesDiv.appendChild(messageContainer);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    function cleanupOldMessages() {
        const messagesRef = database.ref('messages');
        const cutoffTime = Date.now() - 24 * 60 * 60 * 1000; // 24 gi·ªù tr∆∞·ªõc

        messagesRef.orderByChild('timestamp').endAt(cutoffTime).once('value', (snapshot) => {
            const updates = {};
            snapshot.forEach(child => {
                updates[child.key] = null; // ƒê√°nh d·∫•u ƒë·ªÉ x√≥a
            });

            if (Object.keys(updates).length > 0) {
                messagesRef.update(updates);
            }
        });
    }

    // Ch·∫°y d·ªçn d·∫πp m·ªói gi·ªù
    setInterval(cleanupOldMessages, 60 * 60 * 1000);
    cleanupOldMessages(); // Ch·∫°y ngay l·∫ßn ƒë·∫ßu
    function toggleChat() {
        const chatContainer = document.getElementById('chatContainer');
        chatContainer.style.display = chatContainer.style.display === 'flex' ? 'none' : 'flex';
    }

    function getRandomColor() {
        const colors = ['#00ffff', '#ff5e62', '#00ff7f', '#9370db', '#ff1493', '#ffff00', '#ff8c00'];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    // Initialize chat when the page loads
    window.onload = initializeChat;
        // Th√™m v√†o script
        const neonColors = ['neon-red', 'neon-blue', 'neon-green', 'neon-purple', 'neon-pink', 'neon-yellow', 'neon-orange'];

            function applyRandomNeonColors() {
        const buttons = document.querySelectorAll('#buttons button');
        buttons.forEach(button => {
            // X√≥a t·∫•t c·∫£ class neon c≈©
            button.classList.remove(...neonColors);

            // Th√™m class neon m·ªõi ng·∫´u nhi√™n
            const randomColor = neonColors[Math.floor(Math.random() * neonColors.length)];
            button.classList.add(randomColor);
        });
    }

    // G·ªçi h√†m khi trang t·∫£i v√† m·ªói 5 gi√¢y
    window.onload = applyRandomNeonColors;
    setInterval(applyRandomNeonColors, 5000);

        const channels = [
            { name: 'VOV1', url: 'https://stream-cdn.vov.vn/live/vov1-audio_only.m3u8' },
            { name: 'VOV2', url: 'https://stream-cdn.vov.vn/live/vov2-audio_only.m3u8' },
            { name: 'VOV3', url: 'https://stream-cdn.vov.vn/live/vov3-audio_only.m3u8' },
            { name: 'VOV Giao Th√¥ng HCM', url: 'https://stream.vovmedia.vn/vovgt-hcm' },
            { name: 'VOV Giao Th√¥ng H√† N·ªôi', url: 'https://stream-cdn.vov.vn/live/giao_thong_ha_noi-audio_only.m3u8' },
            { name: 'VOV4 Mi·ªÅn Trung', url: 'https://stream.vovmedia.vn/vov4mt' },
            { name: 'VOV4 T√¢y Nguy√™n', url: 'https://stream.vovmedia.vn/vov4tn' },
            { name: 'VOV5  24/7', url: 'https://stream-cdn.vov.vn/live/vov24_7-audio_only.m3u8' },
            { name: 'VOV Mekong', url: 'https://stream.vovmedia.vn/vovmekong' },
            { name: 'H√† N·ªôi FM90', url: 'https://cloudcdnfm90.tek4tv.vn/HANOI90/stream.m3u8' },
            { name: 'H√† Tƒ©nh', url: 'https://wse.hatinhtv.net/radio/voht/playlist.m3u8' },
            { name: 'Qu·∫£ng Nam', url: 'https://qtv.vncdn.vn/qtvlive/qnr1.m3u8' },
            { name: 'B√¨nh Ph∆∞·ªõc', url: 'https://live.baobinhphuoc.com.vn/bptvlive/radio.m3u8' },
            { name: 'Thanh H√≥a', url: 'https://s3-fpt-cdn.sohatv.vn/live/pull/Y5Kan2X7I7GHo4VN/thth-live/2DzDaj9NBVpQch8d/337a54767a7233703637564336316a6d0320b17bb2a0a51d3c2fb8b832f196b88c77a8c14ad1a62df6ce6018e55ac84c6a5fc5434dd07caa0f80bff256e78bfb43ea84716892bfd4e91cea41f430eaf1757bd67023db240c5c65ab166b14d9f6ef91a53d1411c09678e458b2d7446a4bac72748cbab6485bc90283d420dd40833e4909a309e04f76f292288773e87dc9032c5740ed8c3957456917c899ce67c9918cdbc6f8d0440b34c7569316595241/360.m3u8' },
            { name: 'Truy·ªán ƒê√™m Khuya', url: 'https://strm.voh.com.vn/radio/channel5/chunklist_w1847215583.m3u8' },
            {name: 'RFI Ti·∫øng Vi·ªát', url: 'https://rfienvietnamien64k.ice.infomaniak.ch/rfienvietnamien-64.mp3' }

        ];

        const buttonsContainer = document.getElementById('buttons');
        const audioPlayer = document.getElementById('audioPlayer');
        const musicList = document.getElementById('musicList');
        const musicMenu = document.getElementById('musicMenu');

        channels.forEach(channel => {
            const button = document.createElement('button');
            button.textContent = channel.name;
            button.onclick = () => changeChannel(button, channel.url);
            buttonsContainer.appendChild(button);
        });

        function changeChannel(button, url) {
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            if (url.includes('.m3u8') && Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(audioPlayer);
            } else {
                audioPlayer.src = url;
            }
            audioPlayer.play();
        }

                function updateClock() {
            let now = new Date();
            let timeString = now.toLocaleTimeString();
            let dateString = now.toLocaleDateString('vi-VN'); // Hi·ªÉn th·ªã ng√†y/th√°ng/nƒÉm theo chu·∫©n VN
            document.getElementById('clock').innerHTML = `${timeString} <br> ${dateString}`;
        }
        setInterval(updateClock, 1000);
        updateClock(); // G·ªçi ngay khi t·∫£i trang
        const musicFiles = ["loduyen", "motvongvietnam", "aithatlongthuongem", "anhoiolai", "bacphan",
                "best", "cohenvoithanhxuan", "doodle", "exhateme2", "kemduyen",
                "mashup2015", "matketnoi", "neungayay", "ngaychuagiongbao", "nguoikhacloi",
                "ongtroilamtoianhchua", "parkling", "phienlatinhlang", "quakhuanhkhongthequen", "thaytoiyeucoay",
                "phohoale",
                "cantinhnhuthe", "tuyam",
                "aocutinhmoi", "bakeconnghe", "buongdoitaynhaura", "camtucau",
                "chuabaogiomeke", "chuyendoita", "daohoa", "digiuatroirucro", "dungquentenanh",
                "emkoladuynhat", "emlakedangthuong", "evediem", "fire", "goitenemtrongdem",
                "ketheoduoianhsang", "lactroi", "mattroicuaem", "nangamxadan", "neutanguocloi",
                "ngamhoaleroi", "ngayaybanvatoi", "ngaymaiemdimat", "noiaycontimve", "noivucnoitroi",
                "phaohoa", "phiasaumotcogai", "sinhradalathudoilapnhau", "songchohetdoithanhxuan", "tambietnhe",
                "thattinh", "trucxinh", "tuyetsac", "unity", "vicon",
                "votinh", "wedonttalk","aicungcongayxua","votinh", "31073","05","22", "1820","yeuemnhungkhongvoitoi",
                "Áæ§Èùí-YOASOBI", "ÊÇ™È≠î„ÅÆÂ≠ê-Ai Higuchi", "Â§ú„Å´ÈßÜ„Åë„Çã-YOASOBI", "ÂÑ™„Åó„ÅÑÂΩóÊòü-YOASOBI", "„Åü„Å∂„Çì-YOASOBI",
                "„Ç¢„Ç§„Éâ„É´-YOASOBI", "WarhammerTitanTheme", "WarhammerTitan", "vokichcuaem", "Victory",
                "TwoLives", "tuongtu", "Tuoitre", "Titanium", "thucgiac",
                "TheRumbling", "thanhxuan", "Symphony", "StarSky", "SomeoneYouLoved",
                "Seasons", "SaigonoKyojin", "RatherBe", "MoonlightSonata", "maylangthang",
                "Matbiec", "LetMeLoveYou", "LeanOn", "last", "Lacrimosa",
                "Itterasshai", "IntheNameofLove", "HappyForYou", "goldenhour", "GetYouTheMoon",
                "Eyes NoseLips", "Diquahoacuc", "DimensionBreaker", "chuyendoita", "CanWeKissForever",
                "CallofSilence", "2000", "AshesonTheFire", "AnotherLove", "airoicungboanhdi",
                "Again", "520AM", "Barricades",
                "BADBOY-BIGBANG", "BanhMiKo", "BetterOff", "Blue-BIGBANG", "BuonCuaAnh",
                "Chieuhomay", "Closer-J.Fla", "Don'tLetMeDown", "Dotakhongdonang",
                "Duongmotchieu", "Emcuaquakhu", "Emvoiquen", "HaruHaru-BIGBANG",
                "Henemkiepsau", "Hoyeuaimatroi", "LaBanKhongTheYeu", "LacNhauCoPhaiMuonDoi",
                "Laychongsomlamgi", "Letitgo", "Linhhonvathexac", "LOSER-BIGBANG",
                "MONSTER-BIGBANG", "Mottinhyeu2thuthach", "MYHEAVEN-BIGBANG",
                "Nguoidangthuonglaanh", "OnMyWay", "QuaKhuConLaiGi", "SauTatCa",
                "ThangDien", "Thangtu", "theDOGS", "Thegioiaotinhyeuthat",
                "Thuyenquyen", "TONIGHT-BIGBANG", "Vaycuoiremix", "Yeumotnguoicole","Khovenucuoi",
                "amthambenem", "TotheInfinityCastle","10ngannam","ThuCuoi",
                "1buocyeuvandamdau", "24h", "Anhkhachayemkhac",
                "Anhsedenbenem", "Anhthoinhannhuong", "Beodatmaytroi", "BuonKhongEm", "Chicoem",
                "CoAnhODayRoi", "Codonkhongmuonvenha", "Colaremix", "Conduongtoi",
                "Connome", "Cothamkhongveremix", "CryingOverYou", "Cunganh",
                "Cuocsongemonkhong", "Daudetruongthanh", "Daumua", "Divenha",
                "Doimat", "Don'tcoi", "Dunglaiodaythoi", "Duyenminhlo",
                "Emlaconthuyencodon", "Emoilenpho", "Hongkong1",
                "Id072019", "Kosaomaemdayroi", "Lamvoanhnhe", "Langyen",
                "LayAnhDi", "Moho", "Ngaymainguoitalaychong", "Nguoilaoi",
                "OnlyU", "Phiasauem", "Quacaugiobay", "Sainguoisaithoidiem","Songgio",
                "Taconyeunhau", "Tancungnoinho","Thamphuphuban","Thithoi",
                "Tinhyeumaunang", "Trongtrinhocuaanh", "Votuyetvoinhat", "Yeu5remix","Yeuduocko",
                "YeuEmRatNhieu", "Yeulathathu"
            ]

        function loadMusic() {
    musicList.innerHTML = ""; // X√≥a danh s√°ch c≈©
    musicFiles.forEach(file => {
        let li = document.createElement('li');
        li.textContent = file;
        li.onclick = () => playMusic(`music/${file}.mp3`);
        musicList.appendChild(li);
    });
}
        function playMusic(file) {
            audioPlayer.src = file;
            audioPlayer.play();
        }

        function toggleMusicMenu() {
            musicMenu.style.display = musicMenu.style.display === 'block' ? 'none' : 'block';
        }

        function filterMusic() {
            let filter = document.getElementById('searchBox').value.toLowerCase();
            let items = musicList.getElementsByTagName('li');
            for (let item of items) {
                item.style.display = item.textContent.toLowerCase().includes(filter) ? '' : 'none';
            }
        }

        loadMusic();

        let isRandomPlaying = false;
        function playNextRandomSong() {
    if (!isRandomPlaying) return;

    let randomIndex = Math.floor(Math.random() * musicFiles.length);
    let randomSong = `music/${musicFiles[randomIndex]}.mp3`;

    audioPlayer.src = randomSong;
    audioPlayer.play();

    // Khi b√†i nh·∫°c k·∫øt th√∫c, g·ªçi l·∫°i ch√≠nh n√≥ ƒë·ªÉ ph√°t b√†i m·ªõi
    audioPlayer.onended = () => {
        if (isRandomPlaying) {
            playNextRandomSong();
        }
    };
}
function playRandomMusic() {
    playNextRandomSong(); // B·∫•m n√∫t l√† ƒë·ªïi b√†i m·ªõi ngay
}

function playNextRandomSong() {
    let randomIndex = Math.floor(Math.random() * musicFiles.length);
    let randomSong = `music/${musicFiles[randomIndex]}.mp3`;

    audioPlayer.src = randomSong;
    audioPlayer.play();

    audioPlayer.onended = playNextRandomSong; // Khi nh·∫°c k·∫øt th√∫c, g·ªçi l·∫°i ch√≠nh n√≥
}

        // Th√™m n√∫t Random Play v√†o giao di·ªán
        let randomButton = document.createElement("button");
        randomButton.textContent = "Random Play";
        randomButton.onclick = playRandomMusic;
        buttonsContainer.appendChild(randomButton);
        function createFireflies(num) {
            for (let i = 0; i < num; i++) {
                let firefly = document.createElement("div");
                firefly.classList.add("firefly");
                document.body.appendChild(firefly);

                let x = Math.random() * window.innerWidth;
                let y = Math.random() * window.innerHeight;
                firefly.style.left = `${x}px`;
                firefly.style.top = `${y}px`;

                animateFirefly(firefly);
            }
        }

        function animateFirefly(firefly) {
            let xMove = (Math.random() - 1) * 200;
            let yMove = (Math.random() - 1) * 200;
            firefly.animate([
                { transform: `translate(0, 0)` },
                { transform: `translate(${xMove}px, ${yMove}px)` }
            ], {
                duration: Math.random() * 5000 + 5000,
                iterations: Infinity,
                direction: "alternate",
                easing: "linear"
            });
        }

        createFireflies(30);
        // H√†m getWeather gi·ªØ nguy√™n
        function getWeather(city = 'Hanoi') {
            const apiKey = '7ef34e9970e0f6b127cc45c61f9221b8'; // Thay b·∫±ng API key th·∫≠t
            const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=vi`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const weatherDescription = data.weather[0].description;
                    const temperature = Math.round(data.main.temp);
                    const humidity = data.main.humidity;
                    const iconCode = data.weather[0].icon;
                    const iconUrl = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;

                    document.getElementById('weatherInfo').innerHTML = `
                        <p>${city} <img src="${iconUrl}" alt="${weatherDescription}" style="vertical-align: middle;"></p>
                        <p>${weatherDescription}</p>
                        <p>üå°Ô∏è ${temperature}¬∞C</p>
                        <p>üíß ${humidity}%</p>
                    `;
                })
                .catch(error => {
                    console.error('Error fetching weather data:', error);
                    document.getElementById('weatherInfo').innerHTML = '<p>Kh√¥ng th·ªÉ l·∫•y th√¥ng tin th·ªùi ti·∫øt</p>';
                });
        }

        // X·ª≠ l√Ω s·ª± ki·ªán khi trang t·∫£i
        window.onload = function() {
            // G·ªçi l·∫ßn ƒë·∫ßu v·ªõi th√†nh ph·ªë m·∫∑c ƒë·ªãnh
            initializeChat();
            getWeather('Hanoi');

            // X·ª≠ l√Ω thay ƒë·ªïi select box
            document.getElementById('citySelect').addEventListener('change', function() {
                getWeather(this.value);
            });

            // Thi·∫øt l·∫≠p interval c·∫≠p nh·∫≠t
            setInterval(() => {
                const selectedCity = document.getElementById('citySelect').value;
                getWeather(selectedCity);
            }, 1800000); // 30 ph√∫t
        };
    </script>
</body>
</html>
